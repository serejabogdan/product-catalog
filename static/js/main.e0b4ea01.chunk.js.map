{"version":3,"sources":["firebaseConfig.js","redux/types.js","components/Auth/Auth.js","redux/actions.js","components/ProductForm/ProductForm.js","components/Product/Product.js","components/Products/Products.js","components/PrivateRoute.js","components/Menu/Menu.js","components/App.js","redux/authReducer.js","redux/databaseReducer.js","redux/rootReducer.js","index.js"],"names":["app","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","storage","database","SET_CURRENT_USER","SET_PRODUCTS","SET_ID_SELECTED_PRODUCT","mapDispatchToProps","setCurrentUser","user","type","payload","connect","props","isSignUp","useState","email","password","userData","setUserData","history","useHistory","signup","createUserWithEmailAndPassword","signin","signInWithEmailAndPassword","e","a","preventDefault","push","console","error","useEffect","onAuthStateChanged","className","Body","Title","onSubmit","Group","htmlFor","Input","id","placeholder","value","onChange","state","target","primary","to","products","idSelectedProduct","productsList","selectedProduct","find","product","productId","isDefaultForm","isUploadData","setIsUploadData","useForm","register","handleSubmit","errors","isDiscount","watch","formData","convertedFormData","formDataConvert","productsRef","ref","putFileToStorage","file","getImageUrlFromStorage","fileUrl","set","log","data","newData","date","dateInMs","Date","parse","name","put","child","getDownloadURL","DateToday","year","getFullYear","month","getMonth","day","getDate","defaultValue","title","required","minLength","message","maxLength","danger","description","rows","price","max","discount","min","disabled","setIdSelectedProduct","isDiscountValid","now","pluralType","oneType","twoType","threeType","Math","abs","Image","src","Text","hoursLeft","floor","daysLeft","getDiscountDaysLeft","toFixed","Footer","onClick","remove","setProductsList","on","snapshot","val","map","PrivateRoute","Component","component","isUserAuth","rest","render","Menu","pathname","useLocation","productsPath","formPath","signOut","currentUser","path","Products","ProductForm","exact","from","initialState","rootReducer","combineReducers","action","store","createStore","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e0b4ea01.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\nimport 'firebase/storage';\r\n\r\nconst app = firebase.initializeApp({\r\n  apiKey: 'AIzaSyBxb0xYXk2ZbLcz_3FymDkVuYjhq0eTeVU',\r\n  authDomain: 'auth-test-dc179.firebaseapp.com',\r\n  databaseURL: 'https://auth-test-dc179-default-rtdb.firebaseio.com',\r\n  projectId: 'auth-test-dc179',\r\n  storageBucket: 'auth-test-dc179.appspot.com',\r\n  messagingSenderId: '238220952507',\r\n  appId: '1:238220952507:web:ee260232234f8bac0e7a9e'\r\n});\r\nconst auth = app.auth();\r\nconst storage = app.storage();\r\nconst database = app.database();\r\nexport {auth, storage, database};\r\nexport default app;\r\n","export const SET_CURRENT_USER = 'SET_CURRENT_USER';\r\nexport const SET_PRODUCTS = 'SET_PRODUCTS';\r\nexport const SET_ID_SELECTED_PRODUCT = 'SET_ID_SELECTED_PRODUCT';\r\n","import React, {useEffect, useState} from 'react';\r\nimport {Card, Form, Button} from 'bootstrap-4-react';\r\nimport './Auth.css';\r\nimport {Link, useHistory} from 'react-router-dom';\r\n\r\nimport {auth} from '../../firebaseConfig';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {setCurrentUser} from '../../redux/actions';\r\n\r\nfunction Auth(props) {\r\n  const {isSignUp} = props;\r\n  const [userData, setUserData] = useState({email: 'a2@gmail.com', password: '123456'});\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged((user) => {\r\n      props.setCurrentUser(user);\r\n      /* if (user) {\r\n        history.push('/products');\r\n      } */\r\n    });\r\n  }, []);\r\n\r\n  function signup(email, password) {\r\n    return auth.createUserWithEmailAndPassword(email, password);\r\n  }\r\n\r\n  function signin(email, password) {\r\n    return auth.signInWithEmailAndPassword(email, password);\r\n  }\r\n\r\n  async function signUpHandleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      await signup(userData.email, userData.password);\r\n      history.push('/products');\r\n    } catch {\r\n      console.error('Failed to create an account');\r\n    }\r\n  }\r\n\r\n  async function signInHandleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      await signin(userData.email, userData.password);\r\n      history.push('/products');\r\n    } catch {\r\n      console.error('Failed to log in');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"Auth\">\r\n      <Card>\r\n        <Card.Body>\r\n          <Card.Title>{isSignUp ? 'Sign Up' : 'Sign In'}</Card.Title>\r\n          <Form onSubmit={isSignUp ? signUpHandleSubmit : signInHandleSubmit}>\r\n            <Form.Group>\r\n              <label htmlFor=\"email-input\">Email address</label>\r\n              <Form.Input\r\n                type=\"email\"\r\n                id=\"email-input\"\r\n                placeholder=\"Enter email\"\r\n                value={userData.email}\r\n                onChange={(e) => setUserData((state) => ({...state, email: e.target.value}))}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <label htmlFor=\"password-imput\">Password</label>\r\n              <Form.Input\r\n                type=\"password\"\r\n                id=\"password-imput\"\r\n                placeholder=\"Password\"\r\n                value={userData.password}\r\n                onChange={(e) => setUserData((state) => ({...state, password: e.target.value}))}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group></Form.Group>\r\n            <Button primary type=\"submit\">\r\n              Submit\r\n            </Button>\r\n          </Form>\r\n          <div className=\"signin-link\">\r\n            {isSignUp ? <Link to=\"/\">Войти в аккаунт</Link> : <Link to=\"/signUp\">Зарегистрироваться</Link>}\r\n          </div>\r\n        </Card.Body>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setCurrentUser\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(Auth);\r\n","import {SET_CURRENT_USER, SET_PRODUCTS, SET_ID_SELECTED_PRODUCT} from './types';\r\n\r\nexport function setCurrentUser(user) {\r\n  return {\r\n    type: SET_CURRENT_USER,\r\n    payload: user\r\n  };\r\n}\r\n\r\nexport function setProductsList(products) {\r\n  return {\r\n    type: SET_PRODUCTS,\r\n    payload: products\r\n  };\r\n}\r\n\r\nexport function setIdSelectedProduct(product) {\r\n  return {\r\n    type: SET_ID_SELECTED_PRODUCT,\r\n    payload: product\r\n  };\r\n}\r\n","import React, {useState} from 'react';\r\nimport {Card, Form, Button, Alert} from 'bootstrap-4-react';\r\nimport {database, storage} from '../../firebaseConfig';\r\n\r\nimport './ProductForm.css';\r\nimport {useForm} from 'react-hook-form';\r\nimport {connect} from 'react-redux';\r\n\r\nfunction ProductForm({isDefaultForm, selectedProduct}) {\r\n  const [isUploadData, setIsUploadData] = useState(false);\r\n  const {register, handleSubmit, errors, watch} = useForm();\r\n  const isDiscount = watch('discount', true);\r\n\r\n  async function onSubmit(formData) {\r\n    const convertedFormData = formDataConvert(formData);\r\n\r\n    setIsUploadData(true);\r\n    try {\r\n      let productsRef = '';\r\n      if (selectedProduct) {\r\n        productsRef = await database.ref(`Products/${selectedProduct.productId}`);\r\n      } else {\r\n        productsRef = await database.ref('Products');\r\n      }\r\n\r\n      await putFileToStorage(convertedFormData.file);\r\n      const fileUrl = await getImageUrlFromStorage(convertedFormData.file);\r\n      convertedFormData.file = fileUrl;\r\n      if (selectedProduct) {\r\n        productsRef.set(convertedFormData);\r\n      } else {\r\n        productsRef.push(convertedFormData);\r\n      }\r\n    } catch {\r\n      console.log('Data is not uloaded');\r\n    }\r\n    setIsUploadData(false);\r\n  }\r\n\r\n  function formDataConvert(data) {\r\n    const newData = data;\r\n    newData.file = data.file[0];\r\n    if (data.date) {\r\n      const oneDayMs = 86400000;\r\n      const dateInMs = Date.parse(data.date);\r\n      newData.date = dateInMs + oneDayMs;\r\n    }\r\n\r\n    return newData;\r\n  }\r\n\r\n  async function putFileToStorage(file) {\r\n    return storage.ref(`products/${file.name}`).put(file);\r\n  }\r\n\r\n  async function getImageUrlFromStorage(file) {\r\n    return storage.ref('products').child(file.name).getDownloadURL();\r\n  }\r\n\r\n  function DateToday() {\r\n    const date = new Date();\r\n    const year = date.getFullYear();\r\n    let month = date.getMonth() + 1;\r\n    let day = date.getDate();\r\n\r\n    month = month > 10 ? month : `0${month}`;\r\n    day = day > 10 ? day : `0${day}`;\r\n\r\n    return `${year}-${month}-${day}`;\r\n  }\r\n\r\n  return (\r\n    <div className=\"ProductForm\">\r\n      <Card>\r\n        <Card.Body>\r\n          <Form onSubmit={handleSubmit(onSubmit)}>\r\n            <Form.Group>\r\n              <label htmlFor=\"title\">Заголовок*</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"title\"\r\n                name=\"title\"\r\n                placeholder=\"Введите заголовок\"\r\n                className=\"form-control\"\r\n                defaultValue={selectedProduct && selectedProduct.title}\r\n                ref={register({\r\n                  required: 'Заголовок пуст.',\r\n                  minLength: {value: 20, message: 'Введено менее 20-ти симоволов.'},\r\n                  maxLength: {value: 60, message: 'Введено более 60-ти симоволов.'}\r\n                })}\r\n              />\r\n              {errors.title && (\r\n                <Alert className=\"alert\" danger>\r\n                  {errors.title.message}\r\n                </Alert>\r\n              )}\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <label htmlFor=\"file\">Фото*</label>\r\n              <input\r\n                type=\"file\"\r\n                name=\"file\"\r\n                id=\"file\"\r\n                className=\"input-block\"\r\n                ref={register({required: 'Фото не загружено.'})}\r\n              />\r\n              {errors.file && (\r\n                <Alert className=\"alert\" danger>\r\n                  {errors.file.message}\r\n                </Alert>\r\n              )}\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <label htmlFor=\"description\">Описание товара</label>\r\n              <textarea\r\n                type=\"text\"\r\n                id=\"description\"\r\n                name=\"description\"\r\n                defaultValue={selectedProduct && selectedProduct.description}\r\n                rows=\"3\"\r\n                className=\"form-control\"\r\n                ref={register({maxLength: {value: 200, message: 'Максимальное кол-во символов - 200'}})}\r\n              />\r\n              {errors.description && (\r\n                <Alert className=\"alert\" danger>\r\n                  {errors.description.message}\r\n                </Alert>\r\n              )}\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <label htmlFor=\"price\">Цена*</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"price\"\r\n                id=\"price\"\r\n                defaultValue={selectedProduct && selectedProduct.price}\r\n                className=\"form-control\"\r\n                placeholder=\"99999999.99$\"\r\n                ref={register({\r\n                  required: 'Цена не введена.',\r\n                  max: {\r\n                    value: 99999999.9,\r\n                    message: 'Максимальное значение 99999999.9'\r\n                  } /* pattern: /^\\d{1,8}[.]?\\d{1,2}$/ */\r\n                })}\r\n              />\r\n              {errors.price && (\r\n                <Alert className=\"alert\" danger>\r\n                  {errors.price.message}\r\n                </Alert>\r\n              )}\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <label htmlFor=\"discount\">Процент скидки</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"10-90%\"\r\n                id=\"discount\"\r\n                defaultValue={selectedProduct && selectedProduct.discount}\r\n                name=\"discount\"\r\n                ref={register({\r\n                  min: {value: 10, message: 'Минимальное значение 10.'},\r\n                  max: {value: 90, message: 'Максимальное значение 90.'}\r\n                })}\r\n              />\r\n              {errors.discount && (\r\n                <Alert className=\"alert\" danger>\r\n                  {errors.discount.message}\r\n                </Alert>\r\n              )}\r\n            </Form.Group>\r\n            {isDiscount && (\r\n              <Form.Group>\r\n                <label htmlFor=\"discount-end-date\">Дата окончания скидки*</label>\r\n                <input\r\n                  type=\"date\"\r\n                  id=\"discount-end-date\"\r\n                  className=\"input-block\"\r\n                  name=\"date\"\r\n                  min={DateToday()}\r\n                  defaultValue={DateToday()}\r\n                  ref={register({required: true})}\r\n                />\r\n              </Form.Group>\r\n            )}\r\n            <Button primary type=\"submit\" disabled={isUploadData}>\r\n              {isDefaultForm ? 'Добавить' : 'Изменить'}\r\n            </Button>\r\n          </Form>\r\n        </Card.Body>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const {idSelectedProduct, productsList} = state.products;\r\n  return {\r\n    idSelectedProduct: idSelectedProduct,\r\n    selectedProduct: productsList.find((product) => product.productId === idSelectedProduct)\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ProductForm);\r\n","import React from 'react';\r\nimport {Card, Button} from 'bootstrap-4-react';\r\nimport './Product.css';\r\nimport {database} from '../../firebaseConfig';\r\nimport {connect} from 'react-redux';\r\nimport {setIdSelectedProduct} from '../../redux/actions';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nfunction Product({productId, title, price, description, file, date, discount, setIdSelectedProduct}) {\r\n  const history = useHistory();\r\n  const isDiscountValid = date > Date.now();\r\n\r\n  function getDiscountDaysLeft() {\r\n    const oneHour = 3600000;\r\n    const hoursLeft = Math.floor((date - Date.now()) / oneHour);\r\n    const daysLeft = Math.floor(hoursLeft / 24);\r\n    if (!daysLeft) {\r\n      return `До конца акции ${hoursLeft} ${pluralType(hoursLeft, 'час', 'часа', 'часов')}`;\r\n    }\r\n    return `До конца акции ${daysLeft} ${pluralType(daysLeft, 'день', 'дня', 'дней')}`;\r\n  }\r\n\r\n  function pluralType(value, oneType, twoType, threeType) {\r\n    value = Math.abs(value);\r\n    value %= 100;\r\n    if (value >= 5 && value <= 20) {\r\n      return threeType;\r\n    }\r\n    value %= 10;\r\n    if (value === 1) {\r\n      return oneType;\r\n    }\r\n    if (value >= 2 && value <= 4) {\r\n      return twoType;\r\n    }\r\n    return threeType;\r\n  }\r\n\r\n  function getDiscountPrice() {\r\n    const discountPrice = price - (price * discount) / 100;\r\n    return discountPrice.toFixed(2);\r\n  }\r\n\r\n  function onDeleteProduct() {\r\n    database.ref(`Products/${productId}`).remove();\r\n  }\r\n\r\n  function onChangeProduct() {\r\n    setIdSelectedProduct(productId);\r\n    history.push('/change-form');\r\n  }\r\n\r\n  return (\r\n    <div className=\"Product\">\r\n      <Card>\r\n        <Card.Image src={file} />\r\n        <Card.Body>\r\n          <Card.Title>{title}</Card.Title>\r\n          <Card.Text>{description}</Card.Text>\r\n        </Card.Body>\r\n        <div className=\"product__price\">\r\n          {isDiscountValid && (\r\n            <>\r\n              <div className=\"discount-days\">{getDiscountDaysLeft()}</div>\r\n              <div className=\"discount-persent\">{discount}% скидка</div>\r\n              <span className=\"discount-price\">{getDiscountPrice()} грн.</span>\r\n            </>\r\n          )}\r\n          <span className={`current-price ${isDiscountValid && 'discount-active'}`}>{price} грн.</span>\r\n        </div>\r\n        <Card.Footer>\r\n          <Button className=\"delete-button\" primary onClick={onDeleteProduct}>\r\n            Удалить\r\n          </Button>\r\n          <Button primary onClick={onChangeProduct}>\r\n            Изменить\r\n          </Button>\r\n        </Card.Footer>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setIdSelectedProduct\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(Product);\r\n","import React, {useEffect} from 'react';\r\nimport Product from '../Product/Product';\r\nimport './Products.css';\r\n\r\nimport {database} from '../../firebaseConfig';\r\nimport {connect} from 'react-redux';\r\nimport {setProductsList} from '../../redux/actions';\r\n\r\nfunction Products({setProductsList, productsList}) {\r\n  useEffect(() => {\r\n    const data = database.ref('Products');\r\n    data.on('value', (snapshot) => {\r\n      const data = snapshot.val();\r\n      const productsList = [];\r\n      for (const product in data) {\r\n        productsList.push({productId: product, ...data[product]});\r\n      }\r\n      setProductsList(productsList);\r\n      console.log(productsList);\r\n    });\r\n  }, []);\r\n  return (\r\n    <div className=\"Products\">\r\n      {productsList.map((product) => {\r\n        const {productId, title, price, description, file, date, discount} = product;\r\n        return (\r\n          <Product\r\n            key={title}\r\n            title={title}\r\n            description={description}\r\n            file={file}\r\n            price={price}\r\n            date={date}\r\n            discount={discount}\r\n            productId={productId}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    productsList: state.products.productsList\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  setProductsList\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Products);\r\n","import React from 'react';\r\nimport {Redirect, Route} from 'react-router-dom';\r\n\r\nexport default function PrivateRoute({component: Component, isUserAuth, ...rest}) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        isUserAuth ? <Component {...props} isDefaultForm={rest.isDefaultForm} /> : <Redirect to=\"/\" />\r\n      }\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport {Button} from 'bootstrap-4-react/lib/components';\r\nimport {NavLink, useLocation} from 'react-router-dom';\r\nimport {auth} from '../../firebaseConfig';\r\nimport './Menu.css';\r\n\r\nexport default function Menu() {\r\n  const {pathname} = useLocation();\r\n  const productsPath = '/products';\r\n  const formPath = '/form';\r\n  return (\r\n    <nav className=\"menu\">\r\n      {pathname !== productsPath && (\r\n        <NavLink to={productsPath} className=\"menu__link\">\r\n          <Button primary>Каталог</Button>\r\n        </NavLink>\r\n      )}\r\n      {pathname !== formPath && (\r\n        <NavLink to={formPath} className=\"menu__link\">\r\n          <Button primary>Форма</Button>\r\n        </NavLink>\r\n      )}\r\n\r\n      <NavLink to=\"/\" className=\"menu__link\">\r\n        <Button primary onClick={() => auth.signOut()}>\r\n          Выйти\r\n        </Button>\r\n      </NavLink>\r\n    </nav>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport './App.css';\r\nimport Auth from './Auth/Auth';\r\nimport ProductForm from './ProductForm/ProductForm';\r\nimport Products from './Products/Products';\r\nimport {BrowserRouter as Router, Switch, Route, Redirect} from 'react-router-dom';\r\nimport PrivateRoute from './PrivateRoute';\r\nimport {connect} from 'react-redux';\r\nimport Menu from './Menu/Menu';\r\n\r\nfunction App({isUserAuth}) {\r\n  return (\r\n    <div className=\"App\">\r\n      <Router>\r\n        {isUserAuth && <Menu />}\r\n        <Switch>\r\n          <PrivateRoute path=\"/products\" isUserAuth={isUserAuth} component={Products} />\r\n          <PrivateRoute path=\"/form\" isDefaultForm={true} isUserAuth={isUserAuth} component={ProductForm} />\r\n          <PrivateRoute path=\"/change-form\" isDefaultForm={false} isUserAuth={isUserAuth} component={ProductForm} />\r\n          {isUserAuth && <Redirect exact from=\"/\" to=\"/products\" />}\r\n          <Route path=\"/signUp\" render={() => <Auth isSignUp={true} />} />\r\n          <Route path=\"/\" render={() => <Auth isSignUp={false} />} />\r\n        </Switch>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isUserAuth: state.auth.currentUser\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(App);\r\n","import {SET_CURRENT_USER} from './types';\r\n\r\nconst initialState = {\r\n  currentUser: ''\r\n};\r\n\r\nexport const authReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_CURRENT_USER:\r\n      return {...state, currentUser: action.payload};\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {SET_PRODUCTS, SET_ID_SELECTED_PRODUCT} from './types';\r\n\r\nconst initialState = {\r\n  productsList: [],\r\n  idSelectedProduct: ''\r\n};\r\n\r\nexport const databaseReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_PRODUCTS:\r\n      return {...state, productsList: action.payload};\r\n    case SET_ID_SELECTED_PRODUCT:\r\n      return {...state, idSelectedProduct: action.payload};\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {combineReducers} from 'redux';\r\nimport {authReducer} from './authReducer';\r\nimport {databaseReducer} from './databaseReducer';\r\n\r\nexport const rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  products: databaseReducer\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {createStore} from 'redux';\r\nimport App from './components/App';\r\nimport {rootReducer} from './redux/rootReducer';\r\nimport {Provider} from 'react-redux';\r\n\r\nconst store = createStore(rootReducer);\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}