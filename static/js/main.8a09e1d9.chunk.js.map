{"version":3,"sources":["firebaseConfig.js","redux/types.js","utils/auth.js","utils/constants.js","components/Auth/Auth.js","redux/actions.js","utils/database.js","utils/storage.js","utils/utils.js","components/Error/Error.js","components/ProductForm/ProductForm.js","components/Product/Product.js","components/Products/Products.js","components/PrivateRoute.js","components/Menu/Menu.js","components/App.js","redux/authReducer.js","redux/databaseReducer.js","redux/rootReducer.js","index.js"],"names":["app","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","storage","database","SET_CURRENT_USER","SET_PRODUCTS","SET_ID_SELECTED_PRODUCT","signOut","signUp","email","password","createUserWithEmailAndPassword","signIn","signInWithEmailAndPassword","PATH_PRODUCTS","mapDispatchToProps","setCurrentUser","user","type","payload","connect","props","isSignUp","useState","userData","setUserData","history","useHistory","e","a","preventDefault","push","console","error","useEffect","onAuthStateChanged","className","Body","Title","onSubmit","Group","htmlFor","Input","id","placeholder","value","required","onChange","state","target","primary","to","getRef","path","ref","putFileToStorage","file","name","put","getImageUrlFromStorage","child","getDownloadURL","pluralType","oneType","twoType","threeType","Math","abs","formDataConvert","data","newData","date","dateInMs","Date","parse","getDateToday","year","getFullYear","month","getMonth","day","getDate","Error","danger","message","products","idSelectedProduct","productsList","selectedProduct","find","product","productId","isDefaultForm","isUploadData","setIsUploadData","isFileValid","setIsFileValid","useForm","register","handleSubmit","errors","watch","control","isDiscount","discount","isFile","formData","convertedData","productsRef","getProductsRef","fileUrl","putDataToDB","set","defaultValue","title","minLength","maxLength","rules","render","files","reader","FileReader","img","Image","onloadend","onload","isFileSizeInvalid","width","height","onerror","src","result","readAsDataURL","photoValidation","description","rows","price","pattern","min","max","disabled","setIdSelectedProduct","isDiscountValid","now","alt","Text","hoursLeft","floor","daysLeft","getDiscountDaysLeft","toFixed","Footer","onClick","remove","setProductsList","on","snapshot","val","length","map","index","PrivateRoute","Component","component","isUserAuth","rest","Menu","pathname","useLocation","productsPath","formPath","currentUser","Products","ProductForm","exact","from","initialState","rootReducer","combineReducers","action","store","createStore","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8a09e1d9.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\nimport 'firebase/storage';\r\n\r\nconst app = firebase.initializeApp({\r\n  apiKey: 'AIzaSyBxb0xYXk2ZbLcz_3FymDkVuYjhq0eTeVU',\r\n  authDomain: 'auth-test-dc179.firebaseapp.com',\r\n  databaseURL: 'https://auth-test-dc179-default-rtdb.firebaseio.com',\r\n  projectId: 'auth-test-dc179',\r\n  storageBucket: 'auth-test-dc179.appspot.com',\r\n  messagingSenderId: '238220952507',\r\n  appId: '1:238220952507:web:ee260232234f8bac0e7a9e'\r\n});\r\nconst auth = app.auth();\r\nconst storage = app.storage();\r\nconst database = app.database();\r\nexport {auth, storage, database};\r\nexport default app;\r\n","export const SET_CURRENT_USER = 'SET_CURRENT_USER';\r\nexport const SET_PRODUCTS = 'SET_PRODUCTS';\r\nexport const SET_ID_SELECTED_PRODUCT = 'SET_ID_SELECTED_PRODUCT';\r\n","import {auth} from '../firebaseConfig';\r\n\r\nexport function signOut() {\r\n  return auth.signOut();\r\n}\r\n\r\nexport function signUp(email, password) {\r\n  return auth.createUserWithEmailAndPassword(email, password);\r\n}\r\n\r\nexport function signIn(email, password) {\r\n  return auth.signInWithEmailAndPassword(email, password);\r\n}\r\n","export const PATH_PRODUCTS = 'products';\r\n","import React, {useEffect, useState} from 'react';\r\nimport {Card, Form, Button} from 'bootstrap-4-react';\r\nimport './Auth.css';\r\nimport {Link, useHistory} from 'react-router-dom';\r\n\r\nimport {auth} from '../../firebaseConfig';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {setCurrentUser} from '../../redux/actions';\r\nimport {signIn, signUp} from '../../utils/auth';\r\nimport {PATH_PRODUCTS} from '../../utils/constants';\r\n\r\nfunction Auth(props) {\r\n  const {isSignUp} = props;\r\n  const [userData, setUserData] = useState({email: 'a2@gmail.com', password: '123456'});\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged((user) => {\r\n      props.setCurrentUser(user);\r\n    });\r\n  }, []);\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      if (isSignUp) {\r\n        await signUp(userData.email, userData.password);\r\n      } else {\r\n        await signIn(userData.email, userData.password);\r\n      }\r\n      history.push(`/${PATH_PRODUCTS}`);\r\n    } catch {\r\n      console.error('Failed an operation');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"Auth\">\r\n      <Card>\r\n        <Card.Body>\r\n          <Card.Title>{isSignUp ? 'Sign Up' : 'Sign In'}</Card.Title>\r\n          <Form onSubmit={handleSubmit}>\r\n            <Form.Group>\r\n              <label htmlFor=\"email-input\">Email address</label>\r\n              <Form.Input\r\n                type=\"email\"\r\n                id=\"email-input\"\r\n                placeholder=\"Enter email\"\r\n                value={userData.email}\r\n                required\r\n                onChange={(e) => setUserData((state) => ({...state, email: e.target.value}))}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <label htmlFor=\"password-imput\">Password</label>\r\n              <Form.Input\r\n                type=\"password\"\r\n                id=\"password-imput\"\r\n                placeholder=\"Password\"\r\n                value={userData.password}\r\n                required\r\n                onChange={(e) => setUserData((state) => ({...state, password: e.target.value}))}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group></Form.Group>\r\n            <Button primary type=\"submit\">\r\n              Submit\r\n            </Button>\r\n          </Form>\r\n          <div className=\"signin-link\">\r\n            {isSignUp ? <Link to=\"/\">Войти в аккаунт</Link> : <Link to=\"/signUp\">Зарегистрироваться</Link>}\r\n          </div>\r\n        </Card.Body>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setCurrentUser\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(Auth);\r\n","import {SET_CURRENT_USER, SET_PRODUCTS, SET_ID_SELECTED_PRODUCT} from './types';\r\n\r\nexport function setCurrentUser(user) {\r\n  return {\r\n    type: SET_CURRENT_USER,\r\n    payload: user\r\n  };\r\n}\r\n\r\nexport function setProductsList(products) {\r\n  return {\r\n    type: SET_PRODUCTS,\r\n    payload: products\r\n  };\r\n}\r\n\r\nexport function setIdSelectedProduct(product) {\r\n  return {\r\n    type: SET_ID_SELECTED_PRODUCT,\r\n    payload: product\r\n  };\r\n}\r\n","import {database} from '../firebaseConfig';\r\n\r\nexport function onDeleteProduct(path) {\r\n  database.ref(path).remove();\r\n}\r\n\r\nexport function getRef(path) {\r\n  return database.ref(path);\r\n}\r\n","import {storage} from '../firebaseConfig';\r\n\r\nexport async function putFileToStorage(file) {\r\n  return storage.ref(`products/${file.name}`).put(file);\r\n}\r\n\r\nexport async function getImageUrlFromStorage(file) {\r\n  return storage.ref('products').child(file.name).getDownloadURL();\r\n}\r\n","export function pluralType(value, oneType, twoType, threeType) {\r\n  value = Math.abs(value);\r\n  value %= 100;\r\n  if (value >= 5 && value <= 20) {\r\n    return threeType;\r\n  }\r\n  value %= 10;\r\n  if (value === 1) {\r\n    return oneType;\r\n  }\r\n  if (value >= 2 && value <= 4) {\r\n    return twoType;\r\n  }\r\n  return threeType;\r\n}\r\n\r\nexport function formDataConvert(data) {\r\n  const newData = data;\r\n  newData.file = data.file[0];\r\n  if (data.date) {\r\n    const oneDayMs = 86400000;\r\n    const dateInMs = Date.parse(data.date);\r\n    newData.date = dateInMs + oneDayMs;\r\n  }\r\n\r\n  return newData;\r\n}\r\n\r\nexport function getDateToday() {\r\n  const date = new Date();\r\n  const year = date.getFullYear();\r\n  let month = date.getMonth() + 1;\r\n  let day = date.getDate();\r\n\r\n  month = month > 10 ? month : `0${month}`;\r\n  day = day > 10 ? day : `0${day}`;\r\n\r\n  return `${year}-${month}-${day}`;\r\n}\r\n","import React from 'react';\r\nimport './Error.css';\r\nimport {Alert} from 'bootstrap-4-react';\r\n\r\nexport default function Error({error}) {\r\n  return (\r\n    <>\r\n      {error && (\r\n        <Alert className=\"alert\" danger>\r\n          {error.message}\r\n        </Alert>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React, {useState} from 'react';\r\nimport {Card, Form, Button} from 'bootstrap-4-react';\r\nimport './ProductForm.css';\r\nimport {Controller, useForm} from 'react-hook-form';\r\nimport {connect} from 'react-redux';\r\nimport {getRef} from '../../utils/database';\r\nimport {PATH_PRODUCTS} from '../../utils/constants';\r\nimport {getImageUrlFromStorage, putFileToStorage} from '../../utils/storage';\r\nimport {formDataConvert, getDateToday} from '../../utils/utils';\r\nimport Error from '../Error/Error';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nfunction ProductForm({isDefaultForm, selectedProduct}) {\r\n  const [isUploadData, setIsUploadData] = useState(false);\r\n  const [isFileValid, setIsFileValid] = useState(false);\r\n  const {register, handleSubmit, errors, watch, control} = useForm();\r\n  const isDiscount = watch('discount', selectedProduct && selectedProduct.discount ? true : false);\r\n  const isFile = watch('file', false);\r\n  const history = useHistory();\r\n\r\n  async function onSubmit(formData) {\r\n    if (!isFileValid) {\r\n      return;\r\n    }\r\n    const convertedData = formDataConvert(formData);\r\n    setIsUploadData(true);\r\n    const productsRef = getProductsRef();\r\n    try {\r\n      await putFileToStorage(convertedData.file);\r\n      const fileUrl = await getImageUrlFromStorage(convertedData.file);\r\n      convertedData.file = fileUrl;\r\n      putDataToDB(productsRef, convertedData);\r\n      history.push(`/${PATH_PRODUCTS}`);\r\n    } catch {\r\n      console.error('Data is not uloaded');\r\n    }\r\n    setIsUploadData(false);\r\n  }\r\n\r\n  function photoValidation(file) {\r\n    const reader = new FileReader();\r\n    const img = new Image();\r\n\r\n    reader.onloadend = () => {\r\n      img.onload = () => {\r\n        const minFileSize = 200;\r\n        const maxFileSize = 4000;\r\n        const isFileSizeInvalid =\r\n          img.width < minFileSize || img.height < minFileSize || img.width > maxFileSize || img.height > maxFileSize;\r\n        if (isFileSizeInvalid) {\r\n          setIsFileValid(false);\r\n        } else {\r\n          setIsFileValid(true);\r\n        }\r\n      };\r\n\r\n      img.onerror = () => setIsFileValid(false);\r\n      img.src = reader.result;\r\n    };\r\n\r\n    reader.readAsDataURL(file);\r\n  }\r\n\r\n  function getProductsRef() {\r\n    let productsPath = '';\r\n    if (selectedProduct) {\r\n      productsPath = `${PATH_PRODUCTS}/${selectedProduct.productId}`;\r\n    } else {\r\n      productsPath = PATH_PRODUCTS;\r\n    }\r\n    return getRef(productsPath);\r\n  }\r\n\r\n  function putDataToDB(ref, data) {\r\n    if (selectedProduct) {\r\n      ref.set(data);\r\n    } else {\r\n      ref.push(data);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"ProductForm\">\r\n      <Card>\r\n        <Card.Body>\r\n          <Form onSubmit={handleSubmit(onSubmit)}>\r\n            <Form.Group>\r\n              <label htmlFor=\"title\">Заголовок*</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"title\"\r\n                name=\"title\"\r\n                placeholder=\"Введите заголовок\"\r\n                className=\"form-control\"\r\n                defaultValue={selectedProduct && selectedProduct.title}\r\n                ref={register({\r\n                  required: 'Заголовок пуст.',\r\n                  minLength: {value: 20, message: 'Введено менее 20-ти симоволов.'},\r\n                  maxLength: {value: 60, message: 'Введено более 60-ти симоволов.'}\r\n                })}\r\n              />\r\n              <Error error={errors.title} />\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <label htmlFor=\"file\">Фото*</label>\r\n              <Controller\r\n                control={control}\r\n                name=\"file\"\r\n                rules={{required: 'Фото не загружено.'}}\r\n                render={({onChange}) => (\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"file\"\r\n                    className=\"input-block\"\r\n                    onChange={(e) => {\r\n                      const file = e.target.files[0];\r\n                      const files = e.target.files;\r\n                      onChange(files);\r\n                      photoValidation(file);\r\n                    }}\r\n                  />\r\n                )}\r\n              />\r\n              <Error error={errors.file} />\r\n              {isFile && !isFileValid && <Error error={{message: 'Картинка неправильного размера.'}} />}\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <label htmlFor=\"description\">Описание товара</label>\r\n              <textarea\r\n                type=\"text\"\r\n                id=\"description\"\r\n                name=\"description\"\r\n                defaultValue={selectedProduct && selectedProduct.description}\r\n                rows=\"3\"\r\n                className=\"form-control\"\r\n                ref={register({maxLength: {value: 200, message: 'Максимальное кол-во символов - 200'}})}\r\n              />\r\n              <Error error={errors.description} />\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <label htmlFor=\"price\">Цена*</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"price\"\r\n                id=\"price\"\r\n                defaultValue={selectedProduct && selectedProduct.price}\r\n                className=\"form-control\"\r\n                placeholder=\"99999999.99$\"\r\n                ref={register({\r\n                  required: 'Цена не введена.',\r\n                  maxLength: {value: '11', message: 'Неверно введена цена.'},\r\n                  pattern: {value: /^(\\d{1,8}|\\d{1,8}\\.{1}\\d{1,2})$/, message: 'Неверно введена цена.'}\r\n                })}\r\n              />\r\n              <Error error={errors.price} />\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <label htmlFor=\"discount\">Процент скидки</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"10-90%\"\r\n                id=\"discount\"\r\n                defaultValue={selectedProduct && selectedProduct.discount}\r\n                name=\"discount\"\r\n                ref={register({\r\n                  min: {value: 10, message: 'Минимальное значение 10.'},\r\n                  max: {value: 90, message: 'Максимальное значение 90.'},\r\n                  maxLength: {value: 2, message: 'Слишком длинное значение.'},\r\n                  pattern: {value: /^\\d{1,2}$/, message: 'Вводить можно только числа.'}\r\n                })}\r\n              />\r\n              <Error error={errors.discount} />\r\n            </Form.Group>\r\n            {isDiscount && (\r\n              <Form.Group>\r\n                <label htmlFor=\"discount-end-date\">Дата окончания скидки*</label>\r\n                <input\r\n                  type=\"date\"\r\n                  id=\"discount-end-date\"\r\n                  className=\"input-block\"\r\n                  name=\"date\"\r\n                  min={getDateToday()}\r\n                  defaultValue={getDateToday()}\r\n                  ref={register({required: true})}\r\n                />\r\n              </Form.Group>\r\n            )}\r\n            <Button primary type=\"submit\" disabled={isUploadData}>\r\n              {isDefaultForm ? 'Добавить' : 'Изменить'}\r\n            </Button>\r\n          </Form>\r\n        </Card.Body>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const {idSelectedProduct, productsList} = state.products;\r\n  return {\r\n    idSelectedProduct: idSelectedProduct,\r\n    selectedProduct: productsList.find((product) => product.productId === idSelectedProduct)\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ProductForm);\r\n","import React from 'react';\r\nimport {Card, Button} from 'bootstrap-4-react';\r\nimport './Product.css';\r\nimport {connect} from 'react-redux';\r\nimport {setIdSelectedProduct} from '../../redux/actions';\r\nimport {useHistory} from 'react-router-dom';\r\nimport {PATH_PRODUCTS} from '../../utils/constants';\r\nimport {onDeleteProduct} from '../../utils/database';\r\nimport {pluralType} from '../../utils/utils';\r\n\r\nfunction Product({productId, title, price, description, file, date, discount, setIdSelectedProduct}) {\r\n  const history = useHistory();\r\n  const isDiscountValid = date > Date.now();\r\n\r\n  function getDiscountDaysLeft() {\r\n    const oneHour = 3600000;\r\n    const hoursLeft = Math.floor((date - Date.now()) / oneHour);\r\n    const daysLeft = Math.floor(hoursLeft / 24);\r\n    if (!daysLeft) {\r\n      return `До конца акции ${hoursLeft} ${pluralType(hoursLeft, 'час', 'часа', 'часов')}`;\r\n    }\r\n    return `До конца акции ${daysLeft} ${pluralType(daysLeft, 'день', 'дня', 'дней')}`;\r\n  }\r\n\r\n  function getDiscountPrice() {\r\n    const discountPrice = price - (price * discount) / 100;\r\n    return discountPrice.toFixed(2);\r\n  }\r\n\r\n  function onChangeProduct() {\r\n    setIdSelectedProduct(productId);\r\n    history.push('/change-form');\r\n  }\r\n\r\n  return (\r\n    <div className=\"product\">\r\n      <Card>\r\n        <div className=\"product__image\">\r\n          <img src={file} alt=\"\" />\r\n        </div>\r\n        <Card.Body>\r\n          <Card.Title>{title}</Card.Title>\r\n          <Card.Text>{description}</Card.Text>\r\n        </Card.Body>\r\n        <div className=\"product__price\">\r\n          {isDiscountValid && (\r\n            <>\r\n              <div className=\"product__discount-days\">{getDiscountDaysLeft()}</div>\r\n              <div className=\"product__discount-persent\">{discount}% скидка</div>\r\n              <span className=\"product__discount-price\">{getDiscountPrice()} грн.</span>\r\n            </>\r\n          )}\r\n          <span className={`product__current-price ${isDiscountValid && 'product__discount-active'}`}>\r\n            {price} грн.\r\n          </span>\r\n        </div>\r\n        <Card.Footer>\r\n          <Button\r\n            className=\"product__delete-button\"\r\n            primary\r\n            onClick={() => onDeleteProduct(`${PATH_PRODUCTS}/${productId}`)}\r\n          >\r\n            Удалить\r\n          </Button>\r\n          <Button primary onClick={onChangeProduct}>\r\n            Изменить\r\n          </Button>\r\n        </Card.Footer>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setIdSelectedProduct\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(Product);\r\n","import React, {useEffect} from 'react';\r\nimport Product from '../Product/Product';\r\nimport './Products.css';\r\n\r\nimport {connect} from 'react-redux';\r\nimport {setProductsList} from '../../redux/actions';\r\nimport {getRef} from '../../utils/database';\r\nimport {PATH_PRODUCTS} from '../../utils/constants';\r\nimport Error from '../Error/Error';\r\n\r\nfunction Products({setProductsList, productsList}) {\r\n  useEffect(() => {\r\n    const data = getRef(PATH_PRODUCTS);\r\n    data.on('value', (snapshot) => {\r\n      const data = snapshot.val();\r\n      const productsList = [];\r\n      for (const product in data) {\r\n        productsList.push({productId: product, ...data[product]});\r\n      }\r\n      setProductsList(productsList);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"Products\">\r\n      {productsList.length ? (\r\n        productsList.map((product, index) => <Product key={index} {...product} />)\r\n      ) : (\r\n        <Error error={{message: 'Список пуст. Перейдите на страницу с формой добавления продукта.'}} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    productsList: state.products.productsList\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  setProductsList\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Products);\r\n","import React from 'react';\r\nimport {Redirect, Route} from 'react-router-dom';\r\n\r\nexport default function PrivateRoute({component: Component, isUserAuth, ...rest}) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        isUserAuth ? <Component {...props} isDefaultForm={rest.isDefaultForm} /> : <Redirect to=\"/\" />\r\n      }\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport {Button} from 'bootstrap-4-react/lib/components';\r\nimport {NavLink, useLocation} from 'react-router-dom';\r\nimport './Menu.css';\r\nimport {signOut} from '../../utils/auth';\r\nimport {PATH_PRODUCTS} from '../../utils/constants';\r\n\r\nexport default function Menu() {\r\n  const {pathname} = useLocation();\r\n  const productsPath = `/${PATH_PRODUCTS}`;\r\n  const formPath = '/form';\r\n  return (\r\n    <nav className=\"menu\">\r\n      {pathname !== productsPath && (\r\n        <NavLink to={productsPath} className=\"menu__link\">\r\n          <Button primary>Каталог</Button>\r\n        </NavLink>\r\n      )}\r\n      {pathname !== formPath && (\r\n        <NavLink to={formPath} className=\"menu__link\">\r\n          <Button primary>Добавить</Button>\r\n        </NavLink>\r\n      )}\r\n\r\n      <NavLink to=\"/\" className=\"menu__link\">\r\n        <Button primary onClick={signOut}>\r\n          Выйти\r\n        </Button>\r\n      </NavLink>\r\n    </nav>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport './App.css';\r\nimport Auth from './Auth/Auth';\r\nimport ProductForm from './ProductForm/ProductForm';\r\nimport Products from './Products/Products';\r\nimport {HashRouter as Router, Switch, Route, Redirect} from 'react-router-dom';\r\nimport PrivateRoute from './PrivateRoute';\r\nimport {connect} from 'react-redux';\r\nimport Menu from './Menu/Menu';\r\nimport {PATH_PRODUCTS} from '../utils/constants';\r\n\r\nfunction App({isUserAuth}) {\r\n  return (\r\n    <div className=\"App\">\r\n      <Router>\r\n        {isUserAuth && <Menu />}\r\n        <Switch>\r\n          <PrivateRoute path={`/${PATH_PRODUCTS}`} isUserAuth={isUserAuth} component={Products} />\r\n          <PrivateRoute path=\"/form\" isDefaultForm={true} isUserAuth={isUserAuth} component={ProductForm} />\r\n          <PrivateRoute path=\"/change-form\" isDefaultForm={false} isUserAuth={isUserAuth} component={ProductForm} />\r\n          {isUserAuth && <Redirect exact from=\"/\" to={`/${PATH_PRODUCTS}`} />}\r\n          <Route path=\"/signUp\" render={() => <Auth isSignUp={true} />} />\r\n          <Route path=\"/\" render={() => <Auth isSignUp={false} />} />\r\n        </Switch>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isUserAuth: state.auth.currentUser\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(App);\r\n","import {SET_CURRENT_USER} from './types';\r\n\r\nconst initialState = {\r\n  currentUser: ''\r\n};\r\n\r\nexport const authReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_CURRENT_USER:\r\n      return {...state, currentUser: action.payload};\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {SET_PRODUCTS, SET_ID_SELECTED_PRODUCT} from './types';\r\n\r\nconst initialState = {\r\n  productsList: [],\r\n  idSelectedProduct: ''\r\n};\r\n\r\nexport const databaseReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_PRODUCTS:\r\n      return {...state, productsList: action.payload};\r\n    case SET_ID_SELECTED_PRODUCT:\r\n      return {...state, idSelectedProduct: action.payload};\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {combineReducers} from 'redux';\r\nimport {authReducer} from './authReducer';\r\nimport {databaseReducer} from './databaseReducer';\r\n\r\nexport const rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  products: databaseReducer\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {createStore} from 'redux';\r\nimport App from './components/App';\r\nimport {rootReducer} from './redux/rootReducer';\r\nimport {Provider} from 'react-redux';\r\n\r\nconst store = createStore(rootReducer);\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}